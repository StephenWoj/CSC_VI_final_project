{% extends "base.html" %}

{% block content %}

    <div class="main-page">
    <h1 style="text-decoration: underline; font-family: sans-serif;">Welcome to EquipClean</h1>
    {% if user.is_authenticated %}
    <a href="{% url 'createTask' %}">Create task</a>
    <br>
    <a href="{% url 'viewTask' %}">View Current Tasks</a>
    {% else %}
    <a href="{% url 'login' %}?next={{ request.path }}">Login to Create task</a>
    <br>
    <a href="{% url 'login' %}?next={{ request.path }}">Login to View Current Tasks</a>
    {% endif %}
    </div>
    
    <script>
       document.addEventListener("DOMContentLoaded", function() {
        let successMessage = localStorage.getItem("successMessage");

        if (successMessage) {
            let messageContainer = document.createElement("p");
            messageContainer.textContent = successMessage;
            messageContainer.style.color = "green";
            messageContainer.style.backgroundColor = "rgb(230, 255, 230)";
            messageContainer.style.width = "fit-content";
            messageContainer.style.fontSize = "30px"
            document.body.prepend(messageContainer); // Add message at the top of the page

            setTimeout(() => {
                messageContainer.style.transition = "opacity 0.5s ease";
                messageContainer.style.opacity = "0";
                setTimeout(() => messageContainer.remove(), 500);
            }, 5000); // Show for 5 seconds

            localStorage.removeItem("successMessage"); // Clear the message after displaying it
        }
    });
    </script>
{% endblock %}